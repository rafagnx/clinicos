<!doctype html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/png" href="/logo-clinica.png" />
  <link rel="apple-touch-icon" href="/logo-clinica.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="theme-color" content="#0f172a" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="ClinicOS" />
  <title>ClinicOS</title>
</head>
<script>
  // üõ°Ô∏è ClinicOS: Auth Token Resilience üõ°Ô∏è
  (function () {
    try {
      // Goal: Prevent 431 Request Header Fields Too Large (Render limit)
      // Normal JWTs are ~2-4KB. Anything > 14KB is dangerously large for Render/Proxies.
      for (var key in localStorage) {
        if (key.includes('supabase.auth.token') || key.includes('-auth-token') || key === 'clinicos-token') {
          var val = localStorage.getItem(key);
          if (val && val.length > 14000) {
            console.warn('‚ö†Ô∏è Astronomical token detected (' + val.length + ' bytes). Clearing to prevent server rejection.');
            localStorage.removeItem(key);
            // Hint to the app that we need a "Clean Session"
            sessionStorage.setItem('force_clean_session', 'true');
          }
        }
      }
    } catch (e) { }
  })();
</script>

<body>
  <!-- INSTANT LOADING - Shows immediately before ANY JavaScript loads -->
  <div id="root">
    <div id="initial-loader" style="
      min-height: 100vh;
      min-height: 100dvh;
      background: linear-gradient(to bottom, #020617, #0f172a);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      gap: 16px;
    ">
      <div style="
        width: 40px;
        height: 40px;
        border: 4px solid rgba(59, 130, 246, 0.3);
        border-top-color: #3b82f6;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      "></div>
      <p style="color: #64748b; font-size: 14px; font-family: system-ui, sans-serif; margin: 0;">
        Carregando ClinicOS...
      </p>
      <style>
        @keyframes spin { to { transform: rotate(360deg); } }
        body { margin: 0; }
      </style>
    </div>
  </div>
  <script type="module" src="/main.tsx"></script>
</body>

</html>